---
---

# Migrate from V3 to V4

Ballast v4.0.0 is a major release, which some breaking changes in its public API and many changes to its internals.

- Removed everything deprecated since v3.0.0
- getInitialState added to BallastInterceptorScope
- Began refactoring internals for greater flexibility. This work is only partly done, but some new features are now 
  available for advanced usage:
  - EventStrategies
  - InputStrategies no longer require buffering Inputs through a Channel. You may create your own InputStrategy for
    special use-cases like immediate dispatch, or buffering though another mechanism (AWS SQS queues for example)
  - InputFilter is now a property of relevant InputStrategies, rather than being a member of the Builder.
- `Builder.withViewModel()` now returns a strongly-typed variant of the Builder class, allowing for greater type-safety
  - when applying Interceptors
- `ballast-debugger` artifact has been renamed to `ballast-debugger-client`
- Removed `BallastException`. It was only ever used as a base-class for other Exception types
- New Navigation Inputs added to `:ballast-naviagation`
  - `RouterContract.Inputs.PopAllWithAnnotation`
  - `RouterContract.Inputs.PopUntilAnnotation`
  - `RouterContract.Inputs.PopUntilRoute`
- You can now access (and return) the default initial state from SavedState RestoreStateScope for cases where you want to
  _optioannly_ restore the state, rather than recreating the default initial state yourself within the Adapter
- Debugger: APIs to deserialize
- Test: customize entire Builder before each test
- Changed Inputs and Events classes to be `sealed interface` instead of `sealed class`, and used data objects where 
  possible as subclasses of the Inputs or Events
- Added proper toString() values to Interceptors, for prettier logs
